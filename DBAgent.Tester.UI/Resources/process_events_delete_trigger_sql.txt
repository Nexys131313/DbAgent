CREATE OR ALTER TRIGGER PE_TRIGGER_DELETE FOR PROCESS_EVENTS
ACTIVE AFTER DELETE POSITION 0
AS
 DECLARE S VARCHAR(3000);
BEGIN


    S = 'INSERT INTO PROCESS_EVENTS_ACTIONS (
    ID, DONE, CATEGORY_ID, OBJECT_ID, SOUND_OFF_TIME, ELECTRICIAN, GZ_ID, ARRIVE_TIME, DESCRIPTION, DONE_TIMESTAMP,
    SOUND_OFF, ELECTRICIAN_ON, GZ_ON, ARRIVE_ON, REASON_ON, GZ_TIME, DESC_ON, USER_ID, WUSER_NAME, HOST_NAME, REASON_ID, GOBJECT_ID, DEPARTURE_GZ, IS_DELETE_ACTION
) values (:V1, :V2, :V3, :V4, :V5, :V6, :V7, :V8, :V9, :V10, :V11, :V12, :V13, :V14, :V15, :V16, :V17, :V18, :V19, :V20, :V21, :V22, :V23, :V24)';
    
    EXECUTE STATEMENT (:S) (V1 := OLD.ID, V2 := OLD.DONE, V3 :=OLD.CATEGORY_ID, V4 :=OLD.OBJECT_ID,
     V5 := OLD.SOUND_OFF_TIME, V6 := OLD.ELECTRICIAN, V7 := OLD.GZ_ID, V8 := OLD.ARRIVE_TIME, V9 := OLD.DESCRIPTION, V10 := OLD.DONE_TIMESTAMP,
      V11 := OLD.SOUND_OFF, V12 := OLD.ELECTRICIAN_ON, V13 := OLD.GZ_ON, V14 := OLD.ARRIVE_ON, V15 := OLD.REASON_ON, V16 := OLD.GZ_TIME,
       V17 := OLD.DESC_ON, V18 := OLD.USER_ID, V19 := OLD.WUSER_NAME, V20 := OLD.HOST_NAME, V21 := OLD.REASON_ID, V22 := OLD.GOBJECT_ID, V23 := OLD.DEPARTURE_GZ, V24 := 1)

    ON EXTERNAL DATA SOURCE 'C:\DataBases\ACTIONSDB' AS USER 'SYSDBA' PASSWORD 'masterkey';



 POST_EVENT  'PROCESS_EVENTS_ACTIONS_TRIGGER_DELETED';
END